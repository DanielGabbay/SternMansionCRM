# מערכת ההסכמים - אחוזת שטרן CRM

## איך מערכת ההסכמים עובדת?

### תהליך יצירת הזמנה ושליחת הסכם

1. **יצירת הזמנה חדשה**
   - מנהל הנכס יוצר הזמנה חדשה דרך הממשק הראשי
   - הזמנה נשמרת עם סטטוס "בהמתנה" (Pending)
   - המערכת יוצרת מזהה ייחודי להזמנה

2. **יצירת קישור חתימה דינמי**
   - קישור נוצר אוטומטית: `${appUrl}/#/sign/${booking.id}`
   - הקישור מכיל את כל פרטי ההזמנה
   - כל קישור ייחודי ומותאם למשתמש הספציפי

3. **שליחת הקישור ללקוח**
   - העתקת קישור ידנית
   - שליחה בוואטסאפ (אוטומטית עם הודעה מותאמת)
   - שליחה במייל (אוטומטית עם תוכן מוכן)

4. **תהליך החתימה**
   - לקוח נכנס לקישור במכשיר נייד או מחשב
   - קורא את פרטי ההזמנה והתנאים
   - מזין שם מלא
   - חותם באמצעות משטח החתימה הדיגיטלי
   - מאשר הסכמה לתנאים

5. **אישור סופי**
   - לאחר חתימה, סטטוס ההזמנה משתנה ל"מאושרת" (Confirmed)
   - תאריך החתימה נשמר במערכת
   - חתימה דיגיטלית נשמרת כקובץ base64

## איפה נשמרים הנתונים?

### אחסון מקומי נוכחי
המערכת כרגע משתמשת ב-**localStorage** של הדפדפן:

- `bookings` - כל ההזמנות
- `units` - יחידות האירוח
- `blockedDates` - תאריכים חסומים
- `appUrl` - כתובת האפליקציה הציבורית

### מגבלות אחסון מקומי
- **אבדן נתונים**: נתונים יאבדו אם יימחק cache הדפדפן
- **גישה מוגבלת**: נתונים זמינים רק ממחשב אחד
- **גיבוי**: אין גיבוי אוטומטי

## המלצות לאחסון והוסטינג (חינמיים)

### פתרונות הוסטינג חינמיים

#### 1. **Vercel** (מומלץ ביותר)
- **יתרונות**: 
  - פריסה מהירה מ-GitHub
  - HTTPS אוטומטי
  - כתובות מותאמות אישית
  - ביצועים מעולים
- **מגבלות**: 100GB רוחב פס לחודש
- **מתאים לכל**: אפליקציות React/Next.js

#### 2. **Netlify**
- **יתרונות**:
  - פריסה אוטומטית מ-Git
  - פרפיו טרי מובנה
  - אנליטיקה בסיסית
- **מגבלות**: 100GB רוחב פס, 300 דקות build

#### 3. **GitHub Pages**
- **יתרונות**: אינטגרציה מושלמת עם GitHub
- **מגבלות**: רק תוכן סטטי, ללא server-side
- **מתאים**: לאפליקציות client-side בלבד

### פתרונות למסד נתונים (חינמיים)

#### 1. **Supabase** (מומלץ)
```javascript
// דוגמת קוד לאינטגרציה
import { createClient } from '@supabase/supabase-js'

const supabase = createClient(
  'YOUR_SUPABASE_URL',
  'YOUR_SUPABASE_ANON_KEY'
)

// שמירת הזמנה
async function saveBooking(booking) {
  const { data, error } = await supabase
    .from('bookings')
    .insert([booking])
  return data
}
```

#### 2. **Firebase** (Google)
- **יתרונות**: מסד נתונים בזמן אמת, אימות
- **מגבלות**: 1GB אחסון, 50,000 קריאות ליום

#### 3. **MongoDB Atlas**
- **יתרונות**: MongoDB מנוהל
- **מגבלות**: 512MB אחסון חינמי

### אינטגרציה עם שירותי דוא"ל

#### 1. **EmailJS** (מומלץ למשלוח הסכמים)
```javascript
// שליחת מייל אוטומטי עם קישור
import emailjs from '@emailjs/browser'

const sendAgreementEmail = (booking, signatureLink) => {
  emailjs.send('service_id', 'template_id', {
    to_email: booking.customer.email,
    customer_name: booking.customer.fullName,
    signature_link: signatureLink,
    booking_details: `${booking.startDate} - ${booking.endDate}`
  })
}
```

#### 2. **Resend**
- API פשוט לשליחת מיילים
- 3,000 מיילים חינם לחודש

### שירותי SMS (אופציונליים)

#### **Twilio**
- $15 זיכוי התחלתי
- מתאים לשליחת קישורים בSMS

## תהליך פריסה מומלץ

### שלב 1: הכנת הפרויקט לפריסה
```bash
# בדיקת בניה
npm run build

# בדיקת תצוגה מקדימה
npm run preview
```

### שלב 2: העלאה ל-Vercel
1. צור חשבון ב-Vercel.com
2. חבר את ה-GitHub repository
3. לחץ "Deploy"
4. הגדר כתובת מותאמת אישית (אופציונלי)

### שלב 3: עדכון כתובת האפליקציה
1. בהגדרות המערכת, עדכן את "כתובת ציבורית"
2. השתמש בכתובת החדשה: `https://your-app.vercel.app`

## שיפורים עתידיים מומלצים

### תכונות טכניות
- [ ] אינטגרציה עם מסד נתונים חיצוני
- [ ] גיבוי אוטומטי של נתונים
- [ ] מערכת הרשאות למשתמשים מרובים
- [ ] דוחות וסטטיסטיקות מתקדמות

### תכונות משתמש
- [ ] יצירת QR code לקישורי חתימה
- [ ] תזכורות אוטומטיות בSMS/מייל
- [ ] מערכת תשלומים מובנית
- [ ] יצוא הסכמים ל-PDF

### אבטחה
- [ ] אימות דו-שלבי למנהלי המערכת
- [ ] הצפנת חתימות דיגיטליות
- [ ] מעקב אחר גישות לקישורי חתימה

## תמיכה טכנית

### בעיות נפוצות
1. **קישור לא עובד**: בדוק שהכתובת בהגדרות נכונה
2. **חתימה לא נשמרת**: וודא שהדפדפן תומך ב-HTML5 Canvas
3. **נתונים נמחקים**: עבור למסד נתונים חיצוני

### יצירת קשר
לתמיכה טכנית נוספת, צור issue ב-GitHub או פנה למפתח המערכת.